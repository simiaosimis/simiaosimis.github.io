webpackJsonp([1],{"/KV2":function(t,s){},"2b0C":function(t,s){},JbFE:function(t,s){},NHnr:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e("7+uW"),n=e("Mf+H"),o=e.n(n);function a(t){for(var s=t.length-1;s>0;s--){var e=Math.floor(Math.random()*(s+1)),i=[t[e],t[s]];t[s]=i[0],t[e]=i[1]}return t}var r={name:"QuestionGame",data:function(){return{number:1,question:null,answers:[],correctAnswer:null,showingResult:!1,status:null,corrects:0,maxQuestions:10,questionList:[{id:"legal_white",text:"How many legal moves white has?"},{id:"legal_black",text:"How many legal moves black has?"},{id:"checks_white",text:"How many checks moves white has?"},{id:"checks_black",text:"How many checks moves black has?"},{id:"threat_white",text:"How many capture moves white has?"},{id:"threat_black",text:"How many capture moves black has?"}]}},methods:{randomQuestion:function(t){t=t||"white";var s=this.questionList.filter(function(s){return s.id.includes(t)});return s[Math.floor(Math.random()*s.length)]},randomNumber:function(t,s){return Math.floor(Math.random()*(s-t+1)+t)},randomAnswers:function(t){var s=[];for(s[0]=t;s.length<4;){var e=this.randomNumber(t-6,t+6);e<0&&(e=0),s.indexOf(e)>-1||(s[s.length]=e)}return a(s)},start:function(t){var s=this.randomQuestion(t.color);this.question=s.text;var e=0;switch(s.id){case"legal_white":e=t.threats.legal_white;break;case"legal_black":e=t.threats.legal_black;break;case"checks_white":e=t.threats.checks_white;break;case"checks_black":e=t.threats.checks_black;break;case"threat_white":e=t.threats.threat_white;break;case"threat_black":e=t.threats.threat_black}this.correctAnswer=e,this.answers=this.randomAnswers(e)},verifyAnswer:function(t){t==this.correctAnswer?(this.status="correct",this.corrects++):this.status="incorrect",this.showingResult=!0,this.$eventHub.$emit("paint-threats")},nextQuestion:function(){this.correctAnswer=null,this.showingResult=!1,this.status=null,this.number>=this.maxQuestions?this.endGame():this.$eventHub.$emit("next-question"),this.number++},endGame:function(){this.showingResult=!0,this.status="end"},startAgain:function(){this.number=1,this.correctAnswer=null,this.showingResult=!1,this.status=null,this.corrects=0,this.$eventHub.$emit("start-again")}},created:function(){var t=this;this.$eventHub.$on("game-changed",function(s){t.start(s)})}},c={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",["end"!=t.status?e("section",{ref:"question",staticClass:"hero"},[e("div",{staticClass:"hero-body"},[e("div",{staticClass:"container"},[e("h1",{staticClass:"title"},[t._v("\n          "+t._s(t.number)+" -  "+t._s(t.question)+"\n        ")])])])]):t._e(),t._v(" "),e("section",{ref:"answers",staticClass:"hero"},[t.showingResult?t._e():e("div",{staticClass:"buttons is-centered"},t._l(t.answers,function(s){return e("span",{staticClass:"button",on:{click:function(e){return t.verifyAnswer(s)}}},[t._v("\n        "+t._s(s)+"\n      ")])}),0),t._v(" "),t.showingResult?e("div",{staticClass:"is-centered"},["correct"==t.status?e("article",{staticClass:"message is-success"},[t._m(0),t._v(" "),e("div",{staticClass:"message-body"},[t._v("\n          Correct. The answer was "),e("strong",[t._v(" "+t._s(this.correctAnswer)+" ")]),e("br"),t._v(" "),e("span",{staticClass:"button",on:{click:t.nextQuestion}},[t._v(" Next question")])])]):t._e(),t._v(" "),"incorrect"==t.status?e("article",{staticClass:"message is-danger"},[t._m(1),t._v(" "),e("div",{staticClass:"message-body"},[t._v("\n          Incorrect. The answer was "),e("strong",[t._v(" "+t._s(this.correctAnswer)+" ")]),e("br"),t._v(" "),e("span",{staticClass:"button",on:{click:t.nextQuestion}},[t._v(" Next question")])])]):t._e(),t._v(" "),"end"==t.status?e("article",{staticClass:"message is-info"},[t._m(2),t._v(" "),e("div",{staticClass:"message-body"},[t._v("\n          You got "),e("strong",[t._v(" "+t._s(this.corrects)+" ")]),t._v(" correct answers in "+t._s(this.maxQuestions)+" questions"),e("br"),t._v(" "),e("span",{staticClass:"button",on:{click:t.startAgain}},[t._v(" Start Again")])])]):t._e()]):t._e()])])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"message-header"},[s("p",[this._v("Correct")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"message-header"},[s("p",[this._v("Incorrect")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"message-header"},[s("p",[this._v("The end")])])}]},u=e("VU/8")(r,c,!1,null,null,null).exports,l={props:{title:String,message:String,type:String,inputAttrs:{type:Object,default:function(){}},onConfirm:{type:Function,default:function(){}},onCancel:{type:Function,default:function(){}}},data:function(){return{prompt:this.inputAttrs.value||"",isActive:!1,validationMessage:"",selectedMonth:"",selectedYear:""}},methods:{confirm:function(){var t=this;if(void 0!==this.$refs.input&&!this.$refs.input.checkValidity())return this.validationMessage=this.$refs.input.validationMessage,void this.$nextTick(function(){return t.$refs.input.select()});this.onConfirm({username:this.prompt,year:this.selectedYear,month:this.selectedMonth}),this.$parent.close()},cancel:function(){var t=this;this.onCancel.apply(null,arguments),setTimeout(function(){t.$parent.close()},150)}},mounted:function(){var t=this;this.isActive=!0,this.$nextTick(function(){t.hasInput?t.$refs.input.focus():t.$refs.confirmButton.focus()})},created:function(){this.months=["January","February","March","April","May","June","July","August","September","October","November","December"],this.years=[];var t=new Date;this.selectedYear=t.getFullYear(),this.selectedMonth=t.getMonth()+1;for(var s=this.selectedYear;s>this.selectedYear-10;s--)this.years.push(s)}},h={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"dialog"},[e("div",{staticClass:"modal-card animation-content"},[t.title?e("header",{staticClass:"modal-card-head"},[e("p",{staticClass:"modal-card-title"},[t._v(t._s(t.title))])]):t._e(),t._v(" "),e("section",{staticClass:"modal-card-body",class:{"is-titleless":!t.title}},[e("div",{staticClass:"media"},[e("div",{staticClass:"media-content"},[e("p",{domProps:{innerHTML:t._s(t.message)}}),t._v(" "),e("div",{staticClass:"field"},[e("div",{staticClass:"control"},["checkbox"===t.inputAttrs.type?e("input",t._b({directives:[{name:"model",rawName:"v-model",value:t.prompt,expression:"prompt"}],ref:"input",staticClass:"input",class:{"is-danger":t.validationMessage},attrs:{required:"",type:"checkbox"},domProps:{checked:Array.isArray(t.prompt)?t._i(t.prompt,null)>-1:t.prompt},on:{keyup:function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"enter",13,s.key,"Enter")?null:t.confirm(s)},change:function(s){var e=t.prompt,i=s.target,n=!!i.checked;if(Array.isArray(e)){var o=t._i(e,null);i.checked?o<0&&(t.prompt=e.concat([null])):o>-1&&(t.prompt=e.slice(0,o).concat(e.slice(o+1)))}else t.prompt=n}}},"input",t.inputAttrs,!1)):"radio"===t.inputAttrs.type?e("input",t._b({directives:[{name:"model",rawName:"v-model",value:t.prompt,expression:"prompt"}],ref:"input",staticClass:"input",class:{"is-danger":t.validationMessage},attrs:{required:"",type:"radio"},domProps:{checked:t._q(t.prompt,null)},on:{keyup:function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"enter",13,s.key,"Enter")?null:t.confirm(s)},change:function(s){t.prompt=null}}},"input",t.inputAttrs,!1)):e("input",t._b({directives:[{name:"model",rawName:"v-model",value:t.prompt,expression:"prompt"}],ref:"input",staticClass:"input",class:{"is-danger":t.validationMessage},attrs:{required:"",type:t.inputAttrs.type},domProps:{value:t.prompt},on:{keyup:function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"enter",13,s.key,"Enter")?null:t.confirm(s)},input:function(s){s.target.composing||(t.prompt=s.target.value)}}},"input",t.inputAttrs,!1))]),t._v(" "),e("p",{staticClass:"help is-danger"},[t._v(t._s(t.validationMessage))])]),t._v(" "),e("div",{staticClass:"level is-marginless"},[e("div",{staticClass:"level-item"},[e("h4",{staticClass:"has-text-centered datepicker-month level-item"},[e("b-field",{attrs:{grouped:""}},[e("b-select",{attrs:{"aria-label":"Select Month"},model:{value:t.selectedMonth,callback:function(s){t.selectedMonth=s},expression:"selectedMonth"}},t._l(t.months,function(s,i){return e("option",{key:i+1,domProps:{value:i+1}},[t._v("\n                      "+t._s(s)+"\n                    ")])}),0),t._v(" "),e("b-select",{attrs:{"aria-label":"Select Year"},model:{value:t.selectedYear,callback:function(s){t.selectedYear=s},expression:"selectedYear"}},t._l(t.years,function(s){return e("option",{key:s,domProps:{value:s}},[t._v("\n                      "+t._s(s)+"\n                    ")])}),0)],1)],1)])])])])]),t._v(" "),e("footer",{staticClass:"modal-card-foot"},[e("button",{staticClass:"button is-light",on:{click:t.cancel}},[t._v("\n          Default positions\n      ")]),t._v(" "),e("button",{ref:"confirmButton",staticClass:"button is-primary",class:t.type,on:{click:t.confirm}},[t._v("\n          Ok\n      ")])])])])},staticRenderFns:[]},p=e("VU/8")(l,h,!1,null,null,null).exports,v=(e("2b0C"),{name:"tactics-puzzle",components:{chessboard:e("j5Cr").chessboard},data:function(){return{positions1:[],positionNumber1:0,positions2:[],positionNumber2:0,positions3:[],positionNumber3:0,showThreats:!1,started:!1,orientation:"black"}},props:{index:{type:Number},source:{type:Object,default:function(){return{}}}},methods:{showInfo1:function(t){if(this.positionInfo=t,this.positionInfo.history.length>0){for(;this.positions1.length-1>this.positionNumber1;)this.positions1.pop();this.positions1.push(this.positionInfo.fen),this.positionNumber1++}this.$eventHub.$emit("game-changed",{color:this.positionInfo.turn,threats:this.positionInfo})},restartFen1:function(){this.positionNumber1>0&&(this.positionNumber1=0)},previousFen1:function(){this.positionNumber1>0&&this.positionNumber1--},nextFen1:function(){this.positionNumber1<this.positions1.length-1&&this.positionNumber1++},showInfo2:function(t){if(this.positionInfo=t,this.positionInfo.history.length>0){for(;this.positions2.length-1>this.positionNumber2;)this.positions2.pop();this.positions2.push(this.positionInfo.fen),this.positionNumber2++}this.$eventHub.$emit("game-changed",{color:this.positionInfo.turn,threats:this.positionInfo})},restartFen2:function(){this.positionNumber2>0&&(this.positionNumber2=0)},previousFen2:function(){this.positionNumber2>0&&this.positionNumber2--},nextFen2:function(){this.positionNumber2<this.positions2.length-1&&this.positionNumber2++},showInfo3:function(t){if(this.positionInfo=t,this.positionInfo.history.length>0){for(;this.positions3.length-1>this.positionNumber3;)this.positions3.pop();this.positions3.push(this.positionInfo.fen),this.positionNumber3++}this.$eventHub.$emit("game-changed",{color:this.positionInfo.turn,threats:this.positionInfo})},restartFen3:function(){this.positionNumber3>0&&(this.positionNumber3=0)},previousFen3:function(){this.positionNumber3>0&&this.positionNumber3--},nextFen3:function(){this.positionNumber3<this.positions3.length-1&&this.positionNumber3++}},created:function(){this.positions1.push(this.source.fen[0]),this.positions2.push(this.source.fen[1]),this.positions3.push(this.source.fen[2])}}),d={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"columns is-centered is-multiline is-variable"},[e("div",{staticClass:"column is-one-third has-background-light"},[e("h3",[e("strong",[t._v("Problem "+t._s(t.source.uid-2))])]),t._v("\n    "+t._s(t.source.whoIsToMove[0])+" To Move\n    "),e("chessboard",{attrs:{fen:this.positions1[this.positionNumber1],orientation:t.orientation,showThreats:t.showThreats},on:{onMove:t.showInfo1}}),t._v(" "),e("div",{staticClass:"has-centered-text"},["White"===t.source.whoIsToMove[0]?e("span",[t._v("You")]):e("span",[t._v("Level "+t._s(t.source.difficulties[0]))]),t._v(" VS "),"Black"===t.source.whoIsToMove[0]?e("span",[t._v("You")]):e("span",[t._v("Level "+t._s(t.source.difficulties[0]))]),t._v(" "),e("br")]),t._v(" "),e("button",{staticClass:"button is-link-light",on:{click:t.restartFen1}},[t._v("<<")]),t._v(" "),e("button",{staticClass:"button is-link-light",on:{click:t.previousFen1}},[t._v("<")]),t._v(" "),e("button",{staticClass:"button is-link-light",on:{click:t.nextFen1}},[t._v(">")])],1),t._v(" "),e("div",{staticClass:"column is-one-third has-background-light"},[e("h3",[e("strong",[t._v("Problem "+t._s(t.source.uid-1))])]),t._v("\n    "+t._s(t.source.whoIsToMove[1])+" To Move\n    "),e("chessboard",{attrs:{fen:this.positions2[this.positionNumber2],showThreats:t.showThreats},on:{onMove:t.showInfo2}}),t._v(" "),e("div",{staticClass:"has-centered-text"},["White"===t.source.whoIsToMove[1]?e("span",[t._v("You")]):e("span",[t._v("Level "+t._s(t.source.difficulties[1]))]),t._v(" VS "),"Black"===t.source.whoIsToMove[1]?e("span",[t._v("You")]):e("span",[t._v("Level "+t._s(t.source.difficulties[1]))]),t._v(" "),e("br")]),t._v(" "),e("button",{staticClass:"button is-link-light",on:{click:t.restartFen2}},[t._v("<<")]),t._v(" "),e("button",{staticClass:"button is-link-light",on:{click:t.previousFen2}},[t._v("<")]),t._v(" "),e("button",{staticClass:"button is-link-light",on:{click:t.nextFen2}},[t._v(">")])],1),t._v(" "),e("div",{staticClass:"column is-one-third has-background-light"},[e("h3",[e("strong",[t._v("Problem "+t._s(t.source.uid))])]),t._v("\n    "+t._s(t.source.whoIsToMove[2])+" To Move\n    "),e("chessboard",{attrs:{fen:this.positions3[this.positionNumber3],showThreats:t.showThreats},on:{onMove:t.showInfo3}}),t._v(" "),e("div",{staticClass:"has-centered-text"},["White"===t.source.whoIsToMove[2]?e("span",[t._v("You")]):e("span",[t._v("Level "+t._s(t.source.difficulties[2]))]),t._v(" VS "),"Black"===t.source.whoIsToMove[2]?e("span",[t._v("You")]):e("span",[t._v("Level "+t._s(t.source.difficulties[2]))]),t._v(" "),e("br")]),t._v(" "),e("button",{staticClass:"button is-link-light",on:{click:t.restartFen3}},[t._v("<<")]),t._v(" "),e("button",{staticClass:"button is-link-light",on:{click:t.previousFen3}},[t._v("<")]),t._v(" "),e("button",{staticClass:"button is-link-light",on:{click:t.nextFen3}},[t._v(">")])],1),t._v(" "),e("hr"),t._v(" "),e("br")])},staticRenderFns:[]};var m=e("VU/8")(v,d,!1,function(t){e("JbFE")},"data-v-4a1ccb94",null).exports,f=e("A7yg"),_={name:"App",components:{QuestionGame:u,StartModal:p,TacticsPuzzle:m,"virtual-list":e.n(f).a},data:function(){return{currentPosition:{},showThreats:!1,positionNumber:0,started:!1,isStartModalActive:!0,positionInfo:{},tacticsPuzzle:m,positions:[]}},methods:{start:function(t){var s=this;fetch("/static/MaximBlokhCHESSCombinationalMotifs.pgn").then(function(t){return t.text()}).then(function(t){return s.processData(t)})},processData:function(t){var s=this,e=1,i=[],n=[],a=[];o.a.parse(t).forEach(function(t){i.push(t.headers[9].value);var o=t.headers[0].value.substring(2);n.push(o),a.push("?"===t.headers[4].value?"Black":"White"),e%3==0&&(s.positions.push({uid:e,fen:i,difficulties:n,whoIsToMove:a}),i=[],n=[],a=[]),e++})},genericPrompt:function(t){var s=this,e=t.title,i=t.message,n=t.type;this.$modal.open({parent:this,component:p,hasModalCard:!0,props:{title:e,message:i,inputAttrs:{placeholder:"e.g. hikaru",maxlength:20},type:n,onConfirm:function(t){return s.start(t)},onCancel:function(){return s.start()}}})},dispatch:function(t,s){for(var e=this.$parent||this.$root,i=e.$options.name;e&&(!i||i!==t);)(e=e.$parent)&&(i=e.$options.name);if(e){for(var n=arguments.length,o=Array(n>2?n-2:0),a=2;a<n;a++)o[a-2]=arguments[a];e.$emit.apply(e,[s].concat(o))}}},mounted:function(){this.start()},created:function(){var t=this;this.positions=[],this.$eventHub.$on("paint-threats",function(){t.showThreats=!0}),this.$eventHub.$on("next-question",function(){t.showThreats=!1,t.nextQuestion()}),this.$eventHub.$on("start-again",function(){t.showThreats=!1,t.positionNumber=0,t.positions=a(t.positions),t.nextQuestion()})}},b={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{attrs:{id:"app"}},[s("section",{staticClass:"hero is-fullheight"},[this._m(0),this._v(" "),s("div",{staticClass:"hero-body"},[s("div",{staticClass:"container has-text-centered"},[s("virtual-list",{staticStyle:{height:"auto",width:"auto"},attrs:{"data-key":"uid","data-sources":this.positions,"data-component":this.tacticsPuzzle,keeps:10,"estimate-size":250,"page-mode":!0,"bottom-threshold":500}})],1)])])])},staticRenderFns:[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"hero-head"},[e("nav",{staticClass:"navbar"},[e("div",{staticClass:"container"},[e("div",{staticClass:"has-centered-text"},[e("div",[e("a",{attrs:{href:"/"}},[e("p",{staticClass:"title"},[t._v("Chess Tactics Trainer")]),t._v(" "),e("p",{staticClass:"subtitle"},[t._v("Solve Chess Tactics from books.")])])])]),t._v(" "),e("div",{staticClass:"navbar-menu",attrs:{id:"navbarMenu"}},[e("div",{staticClass:"navbar-end"})])]),t._v(" "),e("div",{staticClass:"has-text-right"},[t._v("\n          Made by "),e("a",{attrs:{href:"http://github.com/simiaosimis"}},[t._v("@simiaosimis")]),t._v(" with "),e("a",{attrs:{href:"https://vuejs.org/"}},[t._v("Vue.js")])])])])}]};var g=e("VU/8")(_,b,!1,function(t){e("jLKU")},null,null).exports,k=e("O3Oo"),C=e.n(k);e("/KV2");i.default.use(C.a),i.default.config.productionTip=!1,i.default.prototype.$eventHub=new i.default,window.vm=new i.default({el:"#app",components:{App:g},template:"<App/>"})},jLKU:function(t,s){}},["NHnr"]);
//# sourceMappingURL=app.3827fba0527e5ee6513c.js.map